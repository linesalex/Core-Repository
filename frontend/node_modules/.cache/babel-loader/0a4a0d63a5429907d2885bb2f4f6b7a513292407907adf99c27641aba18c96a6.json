{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lines\\\\OneDrive\\\\Code\\\\Core Repositary\\\\frontend\\\\src\\\\DarkFiberModal.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Table, TableBody, TableCell, TableHead, TableRow, IconButton, Checkbox, TextField, Typography, Box, Chip, Alert, Snackbar } from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport { getDarkFiberDetails, addDarkFiberDetail, editDarkFiberDetail, deleteDarkFiberDetail, reserveDarkFiber, releaseDarkFiber } from './api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultForm = {\n  dwdm_wavelength: '',\n  dwdm_ucn: '',\n  equipment: '',\n  in_use: false,\n  capex_cost_to_light: ''\n};\nfunction DarkFiberFormDialog({\n  open,\n  onClose,\n  onSubmit,\n  initialData,\n  mode\n}) {\n  _s();\n  const [formData, setFormData] = useState(initialData || defaultForm);\n  useEffect(() => {\n    if (open) setFormData(initialData || defaultForm);\n  }, [open, initialData]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(f => ({\n      ...f,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: onClose,\n    maxWidth: \"sm\",\n    fullWidth: true,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: [mode === 'add' ? 'Add' : 'Edit', \" Dark Fiber Detail\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"DWDM Wavelength\",\n        name: \"dwdm_wavelength\",\n        value: formData.dwdm_wavelength,\n        onChange: handleChange,\n        fullWidth: true,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"DWDM UCN\",\n        name: \"dwdm_ucn\",\n        value: formData.dwdm_ucn,\n        onChange: handleChange,\n        fullWidth: true,\n        sx: {\n          mb: 2\n        },\n        helperText: \"Individual circuit ID to distinguish DWDM channels\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Equipment\",\n        name: \"equipment\",\n        value: formData.equipment,\n        onChange: handleChange,\n        fullWidth: true,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"CAPEX Cost to Light\",\n        name: \"capex_cost_to_light\",\n        value: formData.capex_cost_to_light,\n        onChange: handleChange,\n        type: \"number\",\n        fullWidth: true,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n          name: \"in_use\",\n          checked: !!formData.in_use,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), \" In Use\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onClose,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => onSubmit(formData),\n        variant: \"contained\",\n        children: mode === 'add' ? 'Add' : 'Save'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_s(DarkFiberFormDialog, \"8ar/rc32qqfP1v/7eChCac6K+Ng=\");\n_c = DarkFiberFormDialog;\nfunction DarkFiberModal({\n  open,\n  onClose,\n  circuitId\n}) {\n  _s2();\n  const [rows, setRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [formOpen, setFormOpen] = useState(false);\n  const [formMode, setFormMode] = useState('add');\n  const [editId, setEditId] = useState(null);\n  const [editRow, setEditRow] = useState(null);\n  const [reservationSnackbar, setReservationSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n  const fetchRows = async () => {\n    setLoading(true);\n    const data = await getDarkFiberDetails(circuitId);\n    setRows(data);\n    setLoading(false);\n  };\n  useEffect(() => {\n    if (open && circuitId) fetchRows();\n  }, [open, circuitId]);\n  const handleAdd = () => {\n    setFormMode('add');\n    setEditRow(null);\n    setFormOpen(true);\n    setEditId(null);\n  };\n  const handleEdit = row => {\n    setFormMode('edit');\n    setEditRow({\n      dwdm_wavelength: row.dwdm_wavelength || '',\n      dwdm_ucn: row.dwdm_ucn || '',\n      equipment: row.equipment || '',\n      in_use: !!row.in_use,\n      capex_cost_to_light: row.capex_cost_to_light || ''\n    });\n    setEditId(row.id);\n    setFormOpen(true);\n  };\n  const handleDelete = async id => {\n    if (window.confirm('Are you sure you want to delete this dark fiber detail?')) {\n      await deleteDarkFiberDetail(id);\n      fetchRows();\n    }\n  };\n  const handleReserve = async (id, dwdm_ucn) => {\n    const reservedBy = prompt('Enter your name/identifier for the reservation:');\n    if (reservedBy) {\n      try {\n        const response = await reserveDarkFiber(id, reservedBy);\n        setReservationSnackbar({\n          open: true,\n          message: `DWDM UCN ${dwdm_ucn} reserved successfully for 60 days! Expires: ${new Date(response.expires_at).toLocaleDateString()}`,\n          severity: 'success'\n        });\n        fetchRows();\n      } catch (error) {\n        setReservationSnackbar({\n          open: true,\n          message: `Failed to reserve DWDM UCN ${dwdm_ucn}: ${error.message}`,\n          severity: 'error'\n        });\n      }\n    }\n  };\n  const handleRelease = async (id, dwdm_ucn) => {\n    if (window.confirm('Are you sure you want to release this reservation?')) {\n      try {\n        await releaseDarkFiber(id);\n        setReservationSnackbar({\n          open: true,\n          message: `DWDM UCN ${dwdm_ucn} reservation released successfully!`,\n          severity: 'success'\n        });\n        fetchRows();\n      } catch (error) {\n        setReservationSnackbar({\n          open: true,\n          message: `Failed to release reservation: ${error.message}`,\n          severity: 'error'\n        });\n      }\n    }\n  };\n  const handleFormSubmit = async formData => {\n    if (formMode === 'add') {\n      await addDarkFiberDetail({\n        ...formData,\n        circuit_id: circuitId\n      });\n    } else if (formMode === 'edit') {\n      await editDarkFiberDetail(editId, formData);\n    }\n    setFormOpen(false);\n    fetchRows();\n  };\n  const formatDate = dateString => {\n    if (!dateString) return '';\n    return new Date(dateString).toLocaleDateString();\n  };\n  const isExpired = expiryDate => {\n    if (!expiryDate) return false;\n    return new Date(expiryDate) < new Date();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: onClose,\n      maxWidth: \"xl\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [\"Dark Fiber Details for \", circuitId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: \"Manage DWDM channels and reservations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [loading ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            textAlign: 'center',\n            py: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Table, {\n          size: \"small\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"DWDM Wavelength\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"DWDM UCN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Equipment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"In Use\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Reserved\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Reserved By\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Expires\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"CAPEX Cost\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: rows.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.dwdm_wavelength\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1\n                  },\n                  children: [row.dwdm_ucn, row.is_reserved && /*#__PURE__*/_jsxDEV(Chip, {\n                    label: isExpired(row.reservation_expires_at) ? 'EXPIRED' : 'RESERVED',\n                    color: isExpired(row.reservation_expires_at) ? 'error' : 'warning',\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.equipment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: !!row.in_use,\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: !!row.is_reserved,\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.reserved_by\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.reservation_expires_at && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: isExpired(row.reservation_expires_at) ? 'error' : 'text.primary',\n                  children: formatDate(row.reservation_expires_at)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.capex_cost_to_light\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    gap: 0.5\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleEdit(row),\n                    size: \"small\",\n                    children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleDelete(row.id),\n                    size: \"small\",\n                    children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 25\n                  }, this), row.is_reserved && !isExpired(row.reservation_expires_at) ? /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleRelease(row.id, row.dwdm_ucn),\n                    size: \"small\",\n                    color: \"warning\",\n                    title: \"Release reservation\",\n                    children: /*#__PURE__*/_jsxDEV(BookmarkIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 272,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleReserve(row.id, row.dwdm_ucn),\n                    size: \"small\",\n                    color: \"primary\",\n                    title: \"Reserve for 60 days\",\n                    children: /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this)]\n            }, row.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 30\n          }, this),\n          onClick: handleAdd,\n          sx: {\n            mt: 2\n          },\n          children: \"Add Dark Fiber Detail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: onClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DarkFiberFormDialog, {\n      open: formOpen,\n      onClose: () => setFormOpen(false),\n      onSubmit: handleFormSubmit,\n      initialData: formMode === 'edit' ? editRow : defaultForm,\n      mode: formMode\n    }, formMode + (editId || 'add'), false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: reservationSnackbar.open,\n      autoHideDuration: 6000,\n      onClose: () => setReservationSnackbar({\n        ...reservationSnackbar,\n        open: false\n      }),\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setReservationSnackbar({\n          ...reservationSnackbar,\n          open: false\n        }),\n        severity: reservationSnackbar.severity,\n        sx: {\n          width: '100%'\n        },\n        children: reservationSnackbar.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(DarkFiberModal, \"w/0JmP2Xt4XUd651L6yw4aGd8mQ=\");\n_c2 = DarkFiberModal;\nexport default DarkFiberModal;\nvar _c, _c2;\n$RefreshReg$(_c, \"DarkFiberFormDialog\");\n$RefreshReg$(_c2, \"DarkFiberModal\");","map":{"version":3,"names":["React","useEffect","useState","Dialog","DialogTitle","DialogContent","DialogActions","Button","Table","TableBody","TableCell","TableHead","TableRow","IconButton","Checkbox","TextField","Typography","Box","Chip","Alert","Snackbar","AddIcon","EditIcon","DeleteIcon","BookmarkIcon","BookmarkBorderIcon","getDarkFiberDetails","addDarkFiberDetail","editDarkFiberDetail","deleteDarkFiberDetail","reserveDarkFiber","releaseDarkFiber","jsxDEV","_jsxDEV","Fragment","_Fragment","defaultForm","dwdm_wavelength","dwdm_ucn","equipment","in_use","capex_cost_to_light","DarkFiberFormDialog","open","onClose","onSubmit","initialData","mode","_s","formData","setFormData","handleChange","e","name","value","type","checked","target","f","maxWidth","fullWidth","children","fileName","_jsxFileName","lineNumber","columnNumber","label","onChange","sx","mb","helperText","onClick","variant","_c","DarkFiberModal","circuitId","_s2","rows","setRows","loading","setLoading","formOpen","setFormOpen","formMode","setFormMode","editId","setEditId","editRow","setEditRow","reservationSnackbar","setReservationSnackbar","message","severity","fetchRows","data","handleAdd","handleEdit","row","id","handleDelete","window","confirm","handleReserve","reservedBy","prompt","response","Date","expires_at","toLocaleDateString","error","handleRelease","handleFormSubmit","circuit_id","formatDate","dateString","isExpired","expiryDate","color","textAlign","py","size","map","display","alignItems","gap","is_reserved","reservation_expires_at","disabled","reserved_by","title","startIcon","mt","autoHideDuration","width","_c2","$RefreshReg$"],"sources":["C:/Users/lines/OneDrive/Code/Core Repositary/frontend/src/DarkFiberModal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Dialog, DialogTitle, DialogContent, DialogActions, Button, Table, TableBody, TableCell, TableHead, TableRow, IconButton, Checkbox, TextField, Typography, Box, Chip, Alert, Snackbar\r\n} from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\r\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\r\nimport { getDarkFiberDetails, addDarkFiberDetail, editDarkFiberDetail, deleteDarkFiberDetail, reserveDarkFiber, releaseDarkFiber } from './api';\r\n\r\nconst defaultForm = {\r\n  dwdm_wavelength: '',\r\n  dwdm_ucn: '',\r\n  equipment: '',\r\n  in_use: false,\r\n  capex_cost_to_light: '',\r\n};\r\n\r\nfunction DarkFiberFormDialog({ open, onClose, onSubmit, initialData, mode }) {\r\n  const [formData, setFormData] = useState(initialData || defaultForm);\r\n  useEffect(() => {\r\n    if (open) setFormData(initialData || defaultForm);\r\n  }, [open, initialData]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData(f => ({ ...f, [name]: type === 'checkbox' ? checked : value }));\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>{mode === 'add' ? 'Add' : 'Edit'} Dark Fiber Detail</DialogTitle>\r\n      <DialogContent>\r\n        <TextField\r\n          label=\"DWDM Wavelength\"\r\n          name=\"dwdm_wavelength\"\r\n          value={formData.dwdm_wavelength}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          sx={{ mb: 2 }}\r\n        />\r\n        <TextField\r\n          label=\"DWDM UCN\"\r\n          name=\"dwdm_ucn\"\r\n          value={formData.dwdm_ucn}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          sx={{ mb: 2 }}\r\n          helperText=\"Individual circuit ID to distinguish DWDM channels\"\r\n        />\r\n        <TextField\r\n          label=\"Equipment\"\r\n          name=\"equipment\"\r\n          value={formData.equipment}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          sx={{ mb: 2 }}\r\n        />\r\n        <TextField\r\n          label=\"CAPEX Cost to Light\"\r\n          name=\"capex_cost_to_light\"\r\n          value={formData.capex_cost_to_light}\r\n          onChange={handleChange}\r\n          type=\"number\"\r\n          fullWidth\r\n          sx={{ mb: 2 }}\r\n        />\r\n        <div>\r\n          <Checkbox\r\n            name=\"in_use\"\r\n            checked={!!formData.in_use}\r\n            onChange={handleChange}\r\n          /> In Use\r\n        </div>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose}>Cancel</Button>\r\n        <Button onClick={() => onSubmit(formData)} variant=\"contained\">{mode === 'add' ? 'Add' : 'Save'}</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nfunction DarkFiberModal({ open, onClose, circuitId }) {\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [formOpen, setFormOpen] = useState(false);\r\n  const [formMode, setFormMode] = useState('add');\r\n  const [editId, setEditId] = useState(null);\r\n  const [editRow, setEditRow] = useState(null);\r\n  const [reservationSnackbar, setReservationSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n\r\n  const fetchRows = async () => {\r\n    setLoading(true);\r\n    const data = await getDarkFiberDetails(circuitId);\r\n    setRows(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (open && circuitId) fetchRows();\r\n  }, [open, circuitId]);\r\n\r\n  const handleAdd = () => {\r\n    setFormMode('add');\r\n    setEditRow(null);\r\n    setFormOpen(true);\r\n    setEditId(null);\r\n  };\r\n\r\n  const handleEdit = (row) => {\r\n    setFormMode('edit');\r\n    setEditRow({\r\n      dwdm_wavelength: row.dwdm_wavelength || '',\r\n      dwdm_ucn: row.dwdm_ucn || '',\r\n      equipment: row.equipment || '',\r\n      in_use: !!row.in_use,\r\n      capex_cost_to_light: row.capex_cost_to_light || '',\r\n    });\r\n    setEditId(row.id);\r\n    setFormOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this dark fiber detail?')) {\r\n      await deleteDarkFiberDetail(id);\r\n      fetchRows();\r\n    }\r\n  };\r\n\r\n  const handleReserve = async (id, dwdm_ucn) => {\r\n    const reservedBy = prompt('Enter your name/identifier for the reservation:');\r\n    if (reservedBy) {\r\n      try {\r\n        const response = await reserveDarkFiber(id, reservedBy);\r\n        setReservationSnackbar({\r\n          open: true,\r\n          message: `DWDM UCN ${dwdm_ucn} reserved successfully for 60 days! Expires: ${new Date(response.expires_at).toLocaleDateString()}`,\r\n          severity: 'success'\r\n        });\r\n        fetchRows();\r\n      } catch (error) {\r\n        setReservationSnackbar({\r\n          open: true,\r\n          message: `Failed to reserve DWDM UCN ${dwdm_ucn}: ${error.message}`,\r\n          severity: 'error'\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRelease = async (id, dwdm_ucn) => {\r\n    if (window.confirm('Are you sure you want to release this reservation?')) {\r\n      try {\r\n        await releaseDarkFiber(id);\r\n        setReservationSnackbar({\r\n          open: true,\r\n          message: `DWDM UCN ${dwdm_ucn} reservation released successfully!`,\r\n          severity: 'success'\r\n        });\r\n        fetchRows();\r\n      } catch (error) {\r\n        setReservationSnackbar({\r\n          open: true,\r\n          message: `Failed to release reservation: ${error.message}`,\r\n          severity: 'error'\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFormSubmit = async (formData) => {\r\n    if (formMode === 'add') {\r\n      await addDarkFiberDetail({ ...formData, circuit_id: circuitId });\r\n    } else if (formMode === 'edit') {\r\n      await editDarkFiberDetail(editId, formData);\r\n    }\r\n    setFormOpen(false);\r\n    fetchRows();\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString();\r\n  };\r\n\r\n  const isExpired = (expiryDate) => {\r\n    if (!expiryDate) return false;\r\n    return new Date(expiryDate) < new Date();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onClose={onClose} maxWidth=\"xl\" fullWidth>\r\n        <DialogTitle>\r\n          <Typography variant=\"h6\">Dark Fiber Details for {circuitId}</Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Manage DWDM channels and reservations\r\n          </Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {loading ? (\r\n            <Box sx={{ textAlign: 'center', py: 4 }}>\r\n              <Typography>Loading...</Typography>\r\n            </Box>\r\n          ) : (\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>DWDM Wavelength</TableCell>\r\n                  <TableCell>DWDM UCN</TableCell>\r\n                  <TableCell>Equipment</TableCell>\r\n                  <TableCell>In Use</TableCell>\r\n                  <TableCell>Reserved</TableCell>\r\n                  <TableCell>Reserved By</TableCell>\r\n                  <TableCell>Expires</TableCell>\r\n                  <TableCell>CAPEX Cost</TableCell>\r\n                  <TableCell>Actions</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {rows.map(row => (\r\n                  <TableRow key={row.id}>\r\n                    <TableCell>{row.dwdm_wavelength}</TableCell>\r\n                    <TableCell>\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                        {row.dwdm_ucn}\r\n                        {row.is_reserved && (\r\n                          <Chip\r\n                            label={isExpired(row.reservation_expires_at) ? 'EXPIRED' : 'RESERVED'}\r\n                            color={isExpired(row.reservation_expires_at) ? 'error' : 'warning'}\r\n                            size=\"small\"\r\n                          />\r\n                        )}\r\n                      </Box>\r\n                    </TableCell>\r\n                    <TableCell>{row.equipment}</TableCell>\r\n                    <TableCell>\r\n                      <Checkbox checked={!!row.in_use} disabled />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Checkbox checked={!!row.is_reserved} disabled />\r\n                    </TableCell>\r\n                    <TableCell>{row.reserved_by}</TableCell>\r\n                    <TableCell>\r\n                      {row.reservation_expires_at && (\r\n                        <Typography \r\n                          variant=\"body2\" \r\n                          color={isExpired(row.reservation_expires_at) ? 'error' : 'text.primary'}\r\n                        >\r\n                          {formatDate(row.reservation_expires_at)}\r\n                        </Typography>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{row.capex_cost_to_light}</TableCell>\r\n                    <TableCell>\r\n                      <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n                        <IconButton onClick={() => handleEdit(row)} size=\"small\">\r\n                          <EditIcon />\r\n                        </IconButton>\r\n                        <IconButton onClick={() => handleDelete(row.id)} size=\"small\">\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                        {row.is_reserved && !isExpired(row.reservation_expires_at) ? (\r\n                          <IconButton \r\n                            onClick={() => handleRelease(row.id, row.dwdm_ucn)} \r\n                            size=\"small\"\r\n                            color=\"warning\"\r\n                            title=\"Release reservation\"\r\n                          >\r\n                            <BookmarkIcon />\r\n                          </IconButton>\r\n                        ) : (\r\n                          <IconButton \r\n                            onClick={() => handleReserve(row.id, row.dwdm_ucn)} \r\n                            size=\"small\"\r\n                            color=\"primary\"\r\n                            title=\"Reserve for 60 days\"\r\n                          >\r\n                            <BookmarkBorderIcon />\r\n                          </IconButton>\r\n                        )}\r\n                      </Box>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n          <Button startIcon={<AddIcon />} onClick={handleAdd} sx={{ mt: 2 }}>\r\n            Add Dark Fiber Detail\r\n          </Button>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={onClose}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Add/Edit Form Dialog */}\r\n      <DarkFiberFormDialog\r\n        key={formMode + (editId || 'add')}\r\n        open={formOpen}\r\n        onClose={() => setFormOpen(false)}\r\n        onSubmit={handleFormSubmit}\r\n        initialData={formMode === 'edit' ? editRow : defaultForm}\r\n        mode={formMode}\r\n      />\r\n\r\n      {/* Reservation Notification */}\r\n      <Snackbar\r\n        open={reservationSnackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setReservationSnackbar({ ...reservationSnackbar, open: false })}\r\n      >\r\n        <Alert\r\n          onClose={() => setReservationSnackbar({ ...reservationSnackbar, open: false })}\r\n          severity={reservationSnackbar.severity}\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {reservationSnackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DarkFiberModal; "],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SACEC,MAAM,EAAEC,WAAW,EAAEC,aAAa,EAAEC,aAAa,EAAEC,MAAM,EAAEC,KAAK,EAAEC,SAAS,EAAEC,SAAS,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,EAAEC,GAAG,EAAEC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,QAC/K,eAAe;AACtB,OAAOC,OAAO,MAAM,yBAAyB;AAC7C,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,kBAAkB,MAAM,oCAAoC;AACnE,SAASC,mBAAmB,EAAEC,kBAAkB,EAAEC,mBAAmB,EAAEC,qBAAqB,EAAEC,gBAAgB,EAAEC,gBAAgB,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEhJ,MAAMC,WAAW,GAAG;EAClBC,eAAe,EAAE,EAAE;EACnBC,QAAQ,EAAE,EAAE;EACZC,SAAS,EAAE,EAAE;EACbC,MAAM,EAAE,KAAK;EACbC,mBAAmB,EAAE;AACvB,CAAC;AAED,SAASC,mBAAmBA,CAAC;EAAEC,IAAI;EAAEC,OAAO;EAAEC,QAAQ;EAAEC,WAAW;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EAC3E,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGhD,QAAQ,CAAC4C,WAAW,IAAIV,WAAW,CAAC;EACpEnC,SAAS,CAAC,MAAM;IACd,IAAI0C,IAAI,EAAEO,WAAW,CAACJ,WAAW,IAAIV,WAAW,CAAC;EACnD,CAAC,EAAE,CAACO,IAAI,EAAEG,WAAW,CAAC,CAAC;EAEvB,MAAMK,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEC,KAAK;MAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAGJ,CAAC,CAACK,MAAM;IAC/CP,WAAW,CAACQ,CAAC,KAAK;MAAE,GAAGA,CAAC;MAAE,CAACL,IAAI,GAAGE,IAAI,KAAK,UAAU,GAAGC,OAAO,GAAGF;IAAM,CAAC,CAAC,CAAC;EAC7E,CAAC;EAED,oBACErB,OAAA,CAAC9B,MAAM;IAACwC,IAAI,EAAEA,IAAK;IAACC,OAAO,EAAEA,OAAQ;IAACe,QAAQ,EAAC,IAAI;IAACC,SAAS;IAAAC,QAAA,gBAC3D5B,OAAA,CAAC7B,WAAW;MAAAyD,QAAA,GAAEd,IAAI,KAAK,KAAK,GAAG,KAAK,GAAG,MAAM,EAAC,oBAAkB;IAAA;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAa,CAAC,eAC9EhC,OAAA,CAAC5B,aAAa;MAAAwD,QAAA,gBACZ5B,OAAA,CAAClB,SAAS;QACRmD,KAAK,EAAC,iBAAiB;QACvBb,IAAI,EAAC,iBAAiB;QACtBC,KAAK,EAAEL,QAAQ,CAACZ,eAAgB;QAChC8B,QAAQ,EAAEhB,YAAa;QACvBS,SAAS;QACTQ,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eACFhC,OAAA,CAAClB,SAAS;QACRmD,KAAK,EAAC,UAAU;QAChBb,IAAI,EAAC,UAAU;QACfC,KAAK,EAAEL,QAAQ,CAACX,QAAS;QACzB6B,QAAQ,EAAEhB,YAAa;QACvBS,SAAS;QACTQ,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE,CAAE;QACdC,UAAU,EAAC;MAAoD;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChE,CAAC,eACFhC,OAAA,CAAClB,SAAS;QACRmD,KAAK,EAAC,WAAW;QACjBb,IAAI,EAAC,WAAW;QAChBC,KAAK,EAAEL,QAAQ,CAACV,SAAU;QAC1B4B,QAAQ,EAAEhB,YAAa;QACvBS,SAAS;QACTQ,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eACFhC,OAAA,CAAClB,SAAS;QACRmD,KAAK,EAAC,qBAAqB;QAC3Bb,IAAI,EAAC,qBAAqB;QAC1BC,KAAK,EAAEL,QAAQ,CAACR,mBAAoB;QACpC0B,QAAQ,EAAEhB,YAAa;QACvBI,IAAI,EAAC,QAAQ;QACbK,SAAS;QACTQ,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eACFhC,OAAA;QAAA4B,QAAA,gBACE5B,OAAA,CAACnB,QAAQ;UACPuC,IAAI,EAAC,QAAQ;UACbG,OAAO,EAAE,CAAC,CAACP,QAAQ,CAACT,MAAO;UAC3B2B,QAAQ,EAAEhB;QAAa;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxB,CAAC,WACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACO,CAAC,eAChBhC,OAAA,CAAC3B,aAAa;MAAAuD,QAAA,gBACZ5B,OAAA,CAAC1B,MAAM;QAACgE,OAAO,EAAE3B,OAAQ;QAAAiB,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACzChC,OAAA,CAAC1B,MAAM;QAACgE,OAAO,EAAEA,CAAA,KAAM1B,QAAQ,CAACI,QAAQ,CAAE;QAACuB,OAAO,EAAC,WAAW;QAAAX,QAAA,EAAEd,IAAI,KAAK,KAAK,GAAG,KAAK,GAAG;MAAM;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5F,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACV,CAAC;AAEb;AAACjB,EAAA,CA/DQN,mBAAmB;AAAA+B,EAAA,GAAnB/B,mBAAmB;AAiE5B,SAASgC,cAAcA,CAAC;EAAE/B,IAAI;EAAEC,OAAO;EAAE+B;AAAU,CAAC,EAAE;EAAAC,GAAA;EACpD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG5E,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC6E,OAAO,EAAEC,UAAU,CAAC,GAAG9E,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC+E,QAAQ,EAAEC,WAAW,CAAC,GAAGhF,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACiF,QAAQ,EAAEC,WAAW,CAAC,GAAGlF,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACmF,MAAM,EAAEC,SAAS,CAAC,GAAGpF,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACqF,OAAO,EAAEC,UAAU,CAAC,GAAGtF,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACuF,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGxF,QAAQ,CAAC;IAAEyC,IAAI,EAAE,KAAK;IAAEgD,OAAO,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAU,CAAC,CAAC;EAEjH,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5Bb,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMc,IAAI,GAAG,MAAMpE,mBAAmB,CAACiD,SAAS,CAAC;IACjDG,OAAO,CAACgB,IAAI,CAAC;IACbd,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAED/E,SAAS,CAAC,MAAM;IACd,IAAI0C,IAAI,IAAIgC,SAAS,EAAEkB,SAAS,CAAC,CAAC;EACpC,CAAC,EAAE,CAAClD,IAAI,EAAEgC,SAAS,CAAC,CAAC;EAErB,MAAMoB,SAAS,GAAGA,CAAA,KAAM;IACtBX,WAAW,CAAC,KAAK,CAAC;IAClBI,UAAU,CAAC,IAAI,CAAC;IAChBN,WAAW,CAAC,IAAI,CAAC;IACjBI,SAAS,CAAC,IAAI,CAAC;EACjB,CAAC;EAED,MAAMU,UAAU,GAAIC,GAAG,IAAK;IAC1Bb,WAAW,CAAC,MAAM,CAAC;IACnBI,UAAU,CAAC;MACTnD,eAAe,EAAE4D,GAAG,CAAC5D,eAAe,IAAI,EAAE;MAC1CC,QAAQ,EAAE2D,GAAG,CAAC3D,QAAQ,IAAI,EAAE;MAC5BC,SAAS,EAAE0D,GAAG,CAAC1D,SAAS,IAAI,EAAE;MAC9BC,MAAM,EAAE,CAAC,CAACyD,GAAG,CAACzD,MAAM;MACpBC,mBAAmB,EAAEwD,GAAG,CAACxD,mBAAmB,IAAI;IAClD,CAAC,CAAC;IACF6C,SAAS,CAACW,GAAG,CAACC,EAAE,CAAC;IACjBhB,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,MAAMiB,YAAY,GAAG,MAAOD,EAAE,IAAK;IACjC,IAAIE,MAAM,CAACC,OAAO,CAAC,yDAAyD,CAAC,EAAE;MAC7E,MAAMxE,qBAAqB,CAACqE,EAAE,CAAC;MAC/BL,SAAS,CAAC,CAAC;IACb;EACF,CAAC;EAED,MAAMS,aAAa,GAAG,MAAAA,CAAOJ,EAAE,EAAE5D,QAAQ,KAAK;IAC5C,MAAMiE,UAAU,GAAGC,MAAM,CAAC,iDAAiD,CAAC;IAC5E,IAAID,UAAU,EAAE;MACd,IAAI;QACF,MAAME,QAAQ,GAAG,MAAM3E,gBAAgB,CAACoE,EAAE,EAAEK,UAAU,CAAC;QACvDb,sBAAsB,CAAC;UACrB/C,IAAI,EAAE,IAAI;UACVgD,OAAO,EAAE,YAAYrD,QAAQ,gDAAgD,IAAIoE,IAAI,CAACD,QAAQ,CAACE,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAE;UACjIhB,QAAQ,EAAE;QACZ,CAAC,CAAC;QACFC,SAAS,CAAC,CAAC;MACb,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACdnB,sBAAsB,CAAC;UACrB/C,IAAI,EAAE,IAAI;UACVgD,OAAO,EAAE,8BAA8BrD,QAAQ,KAAKuE,KAAK,CAAClB,OAAO,EAAE;UACnEC,QAAQ,EAAE;QACZ,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EAED,MAAMkB,aAAa,GAAG,MAAAA,CAAOZ,EAAE,EAAE5D,QAAQ,KAAK;IAC5C,IAAI8D,MAAM,CAACC,OAAO,CAAC,oDAAoD,CAAC,EAAE;MACxE,IAAI;QACF,MAAMtE,gBAAgB,CAACmE,EAAE,CAAC;QAC1BR,sBAAsB,CAAC;UACrB/C,IAAI,EAAE,IAAI;UACVgD,OAAO,EAAE,YAAYrD,QAAQ,qCAAqC;UAClEsD,QAAQ,EAAE;QACZ,CAAC,CAAC;QACFC,SAAS,CAAC,CAAC;MACb,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACdnB,sBAAsB,CAAC;UACrB/C,IAAI,EAAE,IAAI;UACVgD,OAAO,EAAE,kCAAkCkB,KAAK,CAAClB,OAAO,EAAE;UAC1DC,QAAQ,EAAE;QACZ,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EAED,MAAMmB,gBAAgB,GAAG,MAAO9D,QAAQ,IAAK;IAC3C,IAAIkC,QAAQ,KAAK,KAAK,EAAE;MACtB,MAAMxD,kBAAkB,CAAC;QAAE,GAAGsB,QAAQ;QAAE+D,UAAU,EAAErC;MAAU,CAAC,CAAC;IAClE,CAAC,MAAM,IAAIQ,QAAQ,KAAK,MAAM,EAAE;MAC9B,MAAMvD,mBAAmB,CAACyD,MAAM,EAAEpC,QAAQ,CAAC;IAC7C;IACAiC,WAAW,CAAC,KAAK,CAAC;IAClBW,SAAS,CAAC,CAAC;EACb,CAAC;EAED,MAAMoB,UAAU,GAAIC,UAAU,IAAK;IACjC,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;IAC1B,OAAO,IAAIR,IAAI,CAACQ,UAAU,CAAC,CAACN,kBAAkB,CAAC,CAAC;EAClD,CAAC;EAED,MAAMO,SAAS,GAAIC,UAAU,IAAK;IAChC,IAAI,CAACA,UAAU,EAAE,OAAO,KAAK;IAC7B,OAAO,IAAIV,IAAI,CAACU,UAAU,CAAC,GAAG,IAAIV,IAAI,CAAC,CAAC;EAC1C,CAAC;EAED,oBACEzE,OAAA,CAAAE,SAAA;IAAA0B,QAAA,gBACE5B,OAAA,CAAC9B,MAAM;MAACwC,IAAI,EAAEA,IAAK;MAACC,OAAO,EAAEA,OAAQ;MAACe,QAAQ,EAAC,IAAI;MAACC,SAAS;MAAAC,QAAA,gBAC3D5B,OAAA,CAAC7B,WAAW;QAAAyD,QAAA,gBACV5B,OAAA,CAACjB,UAAU;UAACwD,OAAO,EAAC,IAAI;UAAAX,QAAA,GAAC,yBAAuB,EAACc,SAAS;QAAA;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa,CAAC,eACxEhC,OAAA,CAACjB,UAAU;UAACwD,OAAO,EAAC,OAAO;UAAC6C,KAAK,EAAC,gBAAgB;UAAAxD,QAAA,EAAC;QAEnD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eACdhC,OAAA,CAAC5B,aAAa;QAAAwD,QAAA,GACXkB,OAAO,gBACN9C,OAAA,CAAChB,GAAG;UAACmD,EAAE,EAAE;YAAEkD,SAAS,EAAE,QAAQ;YAAEC,EAAE,EAAE;UAAE,CAAE;UAAA1D,QAAA,eACtC5B,OAAA,CAACjB,UAAU;YAAA6C,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,gBAENhC,OAAA,CAACzB,KAAK;UAACgH,IAAI,EAAC,OAAO;UAAA3D,QAAA,gBACjB5B,OAAA,CAACtB,SAAS;YAAAkD,QAAA,eACR5B,OAAA,CAACrB,QAAQ;cAAAiD,QAAA,gBACP5B,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAe;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACtChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC/BhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAS;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAChChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC7BhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC/BhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAClChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC9BhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACjChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACZhC,OAAA,CAACxB,SAAS;YAAAoD,QAAA,EACPgB,IAAI,CAAC4C,GAAG,CAACxB,GAAG,iBACXhE,OAAA,CAACrB,QAAQ;cAAAiD,QAAA,gBACP5B,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAEoC,GAAG,CAAC5D;cAAe;gBAAAyB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eAC5ChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,eACR5B,OAAA,CAAChB,GAAG;kBAACmD,EAAE,EAAE;oBAAEsD,OAAO,EAAE,MAAM;oBAAEC,UAAU,EAAE,QAAQ;oBAAEC,GAAG,EAAE;kBAAE,CAAE;kBAAA/D,QAAA,GACxDoC,GAAG,CAAC3D,QAAQ,EACZ2D,GAAG,CAAC4B,WAAW,iBACd5F,OAAA,CAACf,IAAI;oBACHgD,KAAK,EAAEiD,SAAS,CAAClB,GAAG,CAAC6B,sBAAsB,CAAC,GAAG,SAAS,GAAG,UAAW;oBACtET,KAAK,EAAEF,SAAS,CAAClB,GAAG,CAAC6B,sBAAsB,CAAC,GAAG,OAAO,GAAG,SAAU;oBACnEN,IAAI,EAAC;kBAAO;oBAAA1D,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACb,CACF;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG,CAAC,eACZhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAEoC,GAAG,CAAC1D;cAAS;gBAAAuB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACtChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,eACR5B,OAAA,CAACnB,QAAQ;kBAAC0C,OAAO,EAAE,CAAC,CAACyC,GAAG,CAACzD,MAAO;kBAACuF,QAAQ;gBAAA;kBAAAjE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnC,CAAC,eACZhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,eACR5B,OAAA,CAACnB,QAAQ;kBAAC0C,OAAO,EAAE,CAAC,CAACyC,GAAG,CAAC4B,WAAY;kBAACE,QAAQ;gBAAA;kBAAAjE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxC,CAAC,eACZhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAEoC,GAAG,CAAC+B;cAAW;gBAAAlE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACxChC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EACPoC,GAAG,CAAC6B,sBAAsB,iBACzB7F,OAAA,CAACjB,UAAU;kBACTwD,OAAO,EAAC,OAAO;kBACf6C,KAAK,EAAEF,SAAS,CAAClB,GAAG,CAAC6B,sBAAsB,CAAC,GAAG,OAAO,GAAG,cAAe;kBAAAjE,QAAA,EAEvEoD,UAAU,CAAChB,GAAG,CAAC6B,sBAAsB;gBAAC;kBAAAhE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7B;cACb;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACQ,CAAC,eACZhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,EAAEoC,GAAG,CAACxD;cAAmB;gBAAAqB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eAChDhC,OAAA,CAACvB,SAAS;gBAAAmD,QAAA,eACR5B,OAAA,CAAChB,GAAG;kBAACmD,EAAE,EAAE;oBAAEsD,OAAO,EAAE,MAAM;oBAAEE,GAAG,EAAE;kBAAI,CAAE;kBAAA/D,QAAA,gBACrC5B,OAAA,CAACpB,UAAU;oBAAC0D,OAAO,EAAEA,CAAA,KAAMyB,UAAU,CAACC,GAAG,CAAE;oBAACuB,IAAI,EAAC,OAAO;oBAAA3D,QAAA,eACtD5B,OAAA,CAACX,QAAQ;sBAAAwC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACF,CAAC,eACbhC,OAAA,CAACpB,UAAU;oBAAC0D,OAAO,EAAEA,CAAA,KAAM4B,YAAY,CAACF,GAAG,CAACC,EAAE,CAAE;oBAACsB,IAAI,EAAC,OAAO;oBAAA3D,QAAA,eAC3D5B,OAAA,CAACV,UAAU;sBAAAuC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,EACZgC,GAAG,CAAC4B,WAAW,IAAI,CAACV,SAAS,CAAClB,GAAG,CAAC6B,sBAAsB,CAAC,gBACxD7F,OAAA,CAACpB,UAAU;oBACT0D,OAAO,EAAEA,CAAA,KAAMuC,aAAa,CAACb,GAAG,CAACC,EAAE,EAAED,GAAG,CAAC3D,QAAQ,CAAE;oBACnDkF,IAAI,EAAC,OAAO;oBACZH,KAAK,EAAC,SAAS;oBACfY,KAAK,EAAC,qBAAqB;oBAAApE,QAAA,eAE3B5B,OAAA,CAACT,YAAY;sBAAAsC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CAAC,gBAEbhC,OAAA,CAACpB,UAAU;oBACT0D,OAAO,EAAEA,CAAA,KAAM+B,aAAa,CAACL,GAAG,CAACC,EAAE,EAAED,GAAG,CAAC3D,QAAQ,CAAE;oBACnDkF,IAAI,EAAC,OAAO;oBACZH,KAAK,EAAC,SAAS;oBACfY,KAAK,EAAC,qBAAqB;oBAAApE,QAAA,eAE3B5B,OAAA,CAACR,kBAAkB;sBAAAqC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACZ,CACb;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG,CAAC;YAAA,GA7DCgC,GAAG,CAACC,EAAE;cAAApC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA8DX,CACX;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CACR,eACDhC,OAAA,CAAC1B,MAAM;UAAC2H,SAAS,eAAEjG,OAAA,CAACZ,OAAO;YAAAyC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAACM,OAAO,EAAEwB,SAAU;UAAC3B,EAAE,EAAE;YAAE+D,EAAE,EAAE;UAAE,CAAE;UAAAtE,QAAA,EAAC;QAEnE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAChBhC,OAAA,CAAC3B,aAAa;QAAAuD,QAAA,eACZ5B,OAAA,CAAC1B,MAAM;UAACgE,OAAO,EAAE3B,OAAQ;UAAAiB,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGThC,OAAA,CAACS,mBAAmB;MAElBC,IAAI,EAAEsC,QAAS;MACfrC,OAAO,EAAEA,CAAA,KAAMsC,WAAW,CAAC,KAAK,CAAE;MAClCrC,QAAQ,EAAEkE,gBAAiB;MAC3BjE,WAAW,EAAEqC,QAAQ,KAAK,MAAM,GAAGI,OAAO,GAAGnD,WAAY;MACzDW,IAAI,EAAEoC;IAAS,GALVA,QAAQ,IAAIE,MAAM,IAAI,KAAK,CAAC;MAAAvB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAMlC,CAAC,eAGFhC,OAAA,CAACb,QAAQ;MACPuB,IAAI,EAAE8C,mBAAmB,CAAC9C,IAAK;MAC/ByF,gBAAgB,EAAE,IAAK;MACvBxF,OAAO,EAAEA,CAAA,KAAM8C,sBAAsB,CAAC;QAAE,GAAGD,mBAAmB;QAAE9C,IAAI,EAAE;MAAM,CAAC,CAAE;MAAAkB,QAAA,eAE/E5B,OAAA,CAACd,KAAK;QACJyB,OAAO,EAAEA,CAAA,KAAM8C,sBAAsB,CAAC;UAAE,GAAGD,mBAAmB;UAAE9C,IAAI,EAAE;QAAM,CAAC,CAAE;QAC/EiD,QAAQ,EAAEH,mBAAmB,CAACG,QAAS;QACvCxB,EAAE,EAAE;UAAEiE,KAAK,EAAE;QAAO,CAAE;QAAAxE,QAAA,EAErB4B,mBAAmB,CAACE;MAAO;QAAA7B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA,eACX,CAAC;AAEP;AAACW,GAAA,CAjPQF,cAAc;AAAA4D,GAAA,GAAd5D,cAAc;AAmPvB,eAAeA,cAAc;AAAC,IAAAD,EAAA,EAAA6D,GAAA;AAAAC,YAAA,CAAA9D,EAAA;AAAA8D,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}